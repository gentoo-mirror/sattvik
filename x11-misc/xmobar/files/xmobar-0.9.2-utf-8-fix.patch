diff -Naur xmobar-0.9.2/XUtil.hsc xmobar-0.9.2.utf8-fix/XUtil.hsc
--- xmobar-0.9.2/XUtil.hsc	2009-04-11 05:45:31.000000000 -0500
+++ xmobar-0.9.2.utf8-fix/XUtil.hsc	2010-07-30 19:06:14.000000000 -0500
@@ -57,7 +57,7 @@
 #endif
 
 hGetLineSafe :: Handle -> IO String
-#if defined XFT || defined UTF8
+#if (defined XFT || defined UTF8) && (!defined __GLASGOW_HASKELL__ || __GLASGOW_HASKELL__ < 612)
 hGetLineSafe = UTF8.hGetLine
 #else
 hGetLineSafe = hGetLine
